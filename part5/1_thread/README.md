---
sort: 1
---
# 多线程——充分压榨MCU能力

MCU的使用方式。

无操作系统的单片机系统被叫做裸机系统。开发者直接操作硬件，给人的感觉就很硬，很直接。

裸机系统结构很简单，没有特别复杂的思维模式。逻辑系统又有**轮询系统**和**前后台系统**。

轮询系统的典型结构
```c
int main(void)
{
    /* 外设寄存器配置 */
    HardWareInit();

    while(1)
    {
        /* 任务1 */
        function1();

        /* 任务2 */
        function2();
    }
}
```

前后台系统在轮询的基础上加入了中断，中断为前台，轮询为后台
```c
int main(void)
{
    /* 外设寄存器配置 */
    HardWareInit();

    while(1)
    {
        /* 任务1 */
        function1();

        /* 任务2 */
        function2();
    }
}

void ISR1(void)
{

}
```
在一些简单的场合，设计一个精妙中断嵌套的前后台程序也足够用了。经典的例子比如使用STM32进行的电机控制。


在实时操作系统的系统里，把一个个功能分成独立的部分，称为线程。


