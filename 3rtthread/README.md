---
sort: 3
---
# 基于 rt-thread 开发

先学如何使用把 RTOS 用起来。基本都是 rt-thread 官网参考手册的精简版，只保留和开发直接相关的，在使用中理解操作系统，为深入研究操作系统建立起直观感觉。

放眼全世界来看，装机量最大的是 freeRTOS，国产做的比较好的是 rt-thread。


## 为何使用 RTOS ?

操作系统提供了硬件的抽象，虽然 RTOS 大多时候运行在 MCU 上，非常靠近硬件，但是一些比较好的 RTOS(rt-thread) 也做到了对硬件的抽象。这使得不懂电路的开发者完全可以进行应用开发。

使用 RTOS 可以让 MCU 去实现更大规模的功能，做出更复杂、更有意思的东西。

## RT-Thread 介绍

首先 RT-Thread 是国内团队开发的，一些文档都是原生中文，很好。

RT-Thread 用 C 语言实现，但是使用了面向对象的设计方法，不仅仅是 RTOS 本身，其设计思想、代码风格、系统架构也是非常值得研究学习的。

除了用于传统工业控制领域，这也是个**物联网操作系统**( IoT OS )。

感觉 IoT OS 更像是一些列技术的集合，也没有具体的教科书定义，其指的是含操作系统的、包括文件系统图形库等比较完成的中间组件，具备低功耗、链接云端能力的软件。

FreeRTOS、μC/OS 这两种 RTOS 实际上仅仅有个“内核”， RT-Thread 除了实时内核，还有特别丰富的中间层组件，因此我也更看好 rt-thread，用来开发产品速度更快，一些重复的轮子就不用造了。

<figure>
    <img src = "https://www.rt-thread.org/document/site/rt-thread-version/rt-thread-standard/figures/02Software_framework_diagram.png" width=600 />
    <figcaption>RT-Thread 架构（官方文档）</figcaption>
</figure>

- **内核**指的是多线程实现、RTOS 使用的接口、内存管理等 CPU 实现多任务最基础的东西
- 组件和服务层基于内核上，提供了上层的一些软件
- 软件包是 RT-Thread 的特色，生态的问题


## 这部分的学习思路 

只侧重开发，只用接口，理解操作系统的思想，并不追求背后的实现。

- 简单多线程开发
  - 代码框架和线程操作
  - 设备驱动的使用
  - 多线程
- 移植性和调试
  - 自动初始化机制
  - rtt 启动流程
  - shell
- 多线程配合工作
  - 线程间通信
  - 线程同步
- bsp 制作

## 准备工作

- (必要)下载一份 rt-thread 的源码
- (必要)下载安装 env 工具
- 准备好开发板，安装 keil、IAR 等 IDE(裸机开发的那些东西)
- (可选，但强烈建议)熟悉 git 与 github，比较大的软件项目和传统的裸机开发已经不太一样了




